# Phase CLI-1 ê°œë°œ ê³„íšì„œ

## ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025-11-09
- **ì‘ì„±ì**: ê¸°ìˆ  ì´ê´„ì
- **ê²€í† ì**: PM
- **ë²„ì „**: 1.0
- **ìƒíƒœ**: ìµœì¢… í™•ì •
- **ë°°í¬ ëŒ€ìƒ**: ê°œë°œíŒ€ ì „ì²´

---

## ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ìµœì¢… ê²°ì • ì‚¬í•­](#ìµœì¢…-ê²°ì •-ì‚¬í•­)
3. [êµ¬í˜„ ë²”ìœ„](#êµ¬í˜„-ë²”ìœ„)
4. [ì‹œë‚˜ë¦¬ì˜¤ ì»¤ë²„ë¦¬ì§€](#ì‹œë‚˜ë¦¬ì˜¤-ì»¤ë²„ë¦¬ì§€)
5. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
6. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
7. [êµ¬í˜„ ì¼ì •](#êµ¬í˜„-ì¼ì •)
8. [í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸](#í•µì‹¬-ê¸°ëŠ¥-ëª…ì„¸)
9. [ì„±ê³µ ê¸°ì¤€](#ì„±ê³µ-ê¸°ì¤€)
10. [ë¦¬ìŠ¤í¬ ê´€ë¦¬](#ë¦¬ìŠ¤í¬-ê´€ë¦¬)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### í”„ë¡œì íŠ¸ ëª…
**AI ìƒë‹´ íŠ¸ë¦¬ ì‹œìŠ¤í…œ - Phase CLI-1 (í„°ë¯¸ë„ í”„ë¡œí† íƒ€ì…)**

### ëª©í‘œ
- íŠ¸ë¦¬ êµ¬ì¡° ê¸°ë°˜ AI ëŒ€í™” ì‹œìŠ¤í…œì˜ í•µì‹¬ ê¸°ëŠ¥ ê²€ì¦
- MVP(Minimum Viable Product) êµ¬í˜„ì„ í†µí•œ ë¹ ë¥¸ í”¼ë“œë°±
- í–¥í›„ ì›¹ UI ì „í™˜ì„ ìœ„í•œ ê¸°ë°˜ ë§ˆë ¨

### ë°°ê²½
- âœ… LCA ì•Œê³ ë¦¬ì¦˜ ì´í•´ ì™„ë£Œ
- âœ… ë…¸ë“œ ìƒì„± ë…¼ì˜ ì™„ë£Œ (1í„´=1ë…¸ë“œ vs ë¸”ë¡ ëª¨ë¸)
- âœ… ë°©ì‹ A vs B ì¥ë‹¨ì  ë¹„êµ ì™„ë£Œ
- âœ… ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜ ì™„ë£Œ

---

## ìµœì¢… ê²°ì • ì‚¬í•­

### 1. ë…¸ë“œ êµ¬ì¡°: **ë°©ì‹ A (1í„´ = 1ë…¸ë“œ, ì¦‰ì‹œ ìƒì„±)**

#### ì„ íƒ ì´ìœ 
- **êµ¬í˜„ ë‹¨ìˆœì„±** (â­â­â­â­â­): ë²„í¼ ê´€ë¦¬ ë¶ˆí•„ìš”, ìë™ ì €ì¥
- **ë°ì´í„° ë¬´ê²°ì„±** (â­â­â­â­â­): ëª¨ë“  ëŒ€í™” ìë™ ë³´ì¡´, ì†ì‹¤ ìœ„í—˜ ì—†ìŒ
- **í™•ì¥ì„±** (â­â­â­â­â­): UI ì „í™˜ ìš©ì´, ë“œë˜ê·¸ ì•¤ ë“œë¡­ ìì—°ìŠ¤ëŸ¬ì›€

#### Node êµ¬ì¡°
```python
@dataclass
class Node:
    id: str                    # UUID
    parent_id: str | None      # ë¶€ëª¨ ë…¸ë“œ ID (ë£¨íŠ¸ëŠ” None)
    user_question: str         # ì‚¬ìš©ì ì§ˆë¬¸
    ai_answer: str             # AI ì‘ë‹µ
    created_at: str            # ìƒì„± ì‹œê° (ISO 8601)
    metadata: dict             # í™•ì¥ í•„ë“œ (ê·¸ë£¹, ì¤‘ìš”ë„ ë“±)
```

### 2. LCA ì•Œê³ ë¦¬ì¦˜: **Phase CLI-3ì—ì„œ êµ¬í˜„**

#### Phase CLI-1
- ë‹¨ìˆœ ê²½ë¡œ ì¶”ì  (parent_id ì—­ì¶”ì )
- `/goto` ëª…ë ¹ìœ¼ë¡œ ê²½ë¡œ ì „í™˜

#### Phase CLI-3 (í–¥í›„)
- LCA ê¸°ë°˜ ë³‘í•© ê¸°ëŠ¥
- `/merge` ëª…ë ¹ êµ¬í˜„

### 3. ë°ì´í„° ì €ì¥: **JSON íŒŒì¼**

#### ì €ì¥ êµ¬ì¡°
```json
{
  "nodes": {
    "node_id_1": {
      "id": "node_id_1",
      "parent_id": null,
      "user_question": "...",
      "ai_answer": "...",
      "created_at": "2025-11-09T10:30:00",
      "metadata": {}
    },
    "node_id_2": { ... }
  },
  "checkpoints": {
    "weather_talk": "node_id_1",
    "redis_solution": "node_id_5"
  },
  "current_node_id": "node_id_3"
}
```

---

## êµ¬í˜„ ë²”ìœ„

### Phase CLI-1ì— í¬í•¨ âœ…

#### í•µì‹¬ ê¸°ëŠ¥ (6ê°œ)
1. **1í„´ = 1ë…¸ë“œ ìë™ ìƒì„±**
   - ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥ â†’ LLM ì‘ë‹µ â†’ ì¦‰ì‹œ ë…¸ë“œ ìƒì„±
   - parent_id ìë™ ì„¤ì • (current_node_id)

2. **`/save <name>`** - ì²´í¬í¬ì¸íŠ¸ ì €ì¥
   - í˜„ì¬ ë…¸ë“œì— ì´ë¦„í‘œ ë¶™ì´ê¸°
   - ì˜ˆ: `/save weather_talk`

3. **`/goto <node_id | checkpoint>`** - ë…¸ë“œ ì´ë™
   - ë…¸ë“œ ID ë˜ëŠ” ì²´í¬í¬ì¸íŠ¸ ì´ë¦„ìœ¼ë¡œ ì´ë™
   - ì˜ˆ: `/goto node_abc123` ë˜ëŠ” `/goto weather_talk`

4. **`/history`** - í˜„ì¬ ê²½ë¡œ ëŒ€í™” íˆìŠ¤í† ë¦¬
   - ë£¨íŠ¸ë¶€í„° í˜„ì¬ ë…¸ë“œê¹Œì§€ì˜ ëª¨ë“  ëŒ€í™” ì¶œë ¥

5. **`/tree`** - íŠ¸ë¦¬ ì‹œê°í™”
   - ASCII ì•„íŠ¸ë¡œ ì „ì²´ íŠ¸ë¦¬ êµ¬ì¡° í‘œì‹œ
   - ì²´í¬í¬ì¸íŠ¸ ë…¸ë“œëŠ” â­ë¡œ í‘œì‹œ

6. **`/list`** - ë…¸ë“œ ëª©ë¡
   - ëª¨ë“  ë…¸ë“œì˜ IDì™€ ì§ˆë¬¸ ì¼ë¶€ í‘œì‹œ

#### ë³´ì¡° ê¸°ëŠ¥
7. **JSON ì €ì¥/ë¡œë“œ** (ìë™)
   - í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œ ìë™ ì €ì¥
   - ì‹œì‘ ì‹œ ìë™ ë¡œë“œ

8. **`/exit`** - ì¢…ë£Œ ë° ì €ì¥
9. **`/help`** - ë„ì›€ë§

### Phase CLI-2/3ì—ì„œ êµ¬í˜„ âŒ

- `/merge <node_a> <node_b>` - ë³‘í•© (LCA í•„ìš”)
- `/reparent <child> <new_parent>` - ì¤‘ê°„ ì‚½ì…
- AI ìë™ ë¶„ì„ (ì¤‘ìš”ë„, ê·¸ë£¹í•‘)

---

## ì‹œë‚˜ë¦¬ì˜¤ ì»¤ë²„ë¦¬ì§€

### ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ì™€ êµ¬í˜„ ë§¤í•‘

| # | ì‹œë‚˜ë¦¬ì˜¤ | Phase CLI-1 | í•„ìš” ê¸°ëŠ¥ |
|---|---------|------------|----------|
| 1 | ê¸°ë³¸ ëŒ€í™” íë¦„ | âœ… | 1í„´=1ë…¸ë“œ ìë™ ìƒì„± |
| 2 | ë¶„ê¸° ìƒì„± | âœ… | `/goto`, parent_id ì„¤ì • |
| 3 | ë…¸ë“œ ì´ë™ ì¤‘ ëŒ€í™” | âœ… | ì¦‰ì‹œ ìƒì„± (ìë™ ì²˜ë¦¬) |
| 4 | ì²´í¬í¬ì¸íŠ¸ ì €ì¥ | âœ… | `/save` |
| 5 | ê²½ë¡œ ì „í™˜ | âœ… | `get_context_path()` |
| 6 | ëŒ€í™” íˆìŠ¤í† ë¦¬ ë³´ê¸° | âœ… | `/history` |
| 7 | íŠ¸ë¦¬ ì‹œê°í™” | âœ… | `/tree` |
| 8 | ë°ì´í„° ì˜ì†ì„± | âœ… | JSON ì €ì¥/ë¡œë“œ |
| 9 | ë³‘í•© | âŒ CLI-3 | LCA ì•Œê³ ë¦¬ì¦˜ |
| 10 | ì¤‘ê°„ ì‚½ì… | âŒ CLI-2 | `/reparent` |

**ì»¤ë²„ìœ¨**: 8/10 (80%) - Phase CLI-1ì—ì„œ í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ ì»¤ë²„

---

## ì‹œë‚˜ë¦¬ì˜¤ ìƒì„¸ ì˜ˆì‹œ

### ì‹œë‚˜ë¦¬ì˜¤ 1~8: Phase CLI-1 ì§€ì›

#### ì˜ˆì‹œ: í”„ë¡œì íŠ¸ ìƒë‹´ (ê°œë°œì ê¹€ê°œë°œì”¨)

```
[ê¸°ë³¸ ëŒ€í™”]
ê¹€ê°œë°œ> Django í”„ë¡œì íŠ¸ì—ì„œ API ì„±ëŠ¥ì´ ëŠë ¤ìš”
AI> ì–´ë–¤ APIê°€ ëŠë¦°ì§€, ì‘ë‹µ ì‹œê°„ì€ ì–¼ë§ˆë‚˜ ë˜ëŠ”ì§€ ì•Œë ¤ì£¼ì„¸ìš”
â†’ node_1 ìë™ ìƒì„±

ê¹€ê°œë°œ> ìœ ì € ëª©ë¡ APIê°€ 3ì´ˆ ê±¸ë ¤ìš”
AI> ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”. N+1 ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
â†’ node_2 ìë™ ìƒì„± (parent: node_1)

[ë¶„ê¸° ìƒì„±]
ê¹€ê°œë°œ> /goto node_1
AI> [node_1ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤]

ê¹€ê°œë°œ> ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ í•  ìˆ˜ ìˆë‚˜ìš”?
AI> ë„¤, Redisë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤. ì„¤ì¹˜ ë°©ë²•ì€...
â†’ node_3 ìë™ ìƒì„± (parent: node_1)

[ì²´í¬í¬ì¸íŠ¸ ì €ì¥]
ê¹€ê°œë°œ> /save redis_solution
AI> âœ… 'redis_solution' ì²´í¬í¬ì¸íŠ¸ ì €ì¥ ì™„ë£Œ

[íŠ¸ë¦¬ í™•ì¸]
ê¹€ê°œë°œ> /tree

ğŸŒ³ ëŒ€í™” íŠ¸ë¦¬ êµ¬ì¡°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
root
 â””â”€ node_1: "Django í”„ë¡œì íŠ¸ì—ì„œ API ì„±ëŠ¥ì´..."
     â”œâ”€ node_2: "ìœ ì € ëª©ë¡ APIê°€ 3ì´ˆ ê±¸ë ¤ìš”"
     â””â”€ node_3: "ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ í•  ìˆ˜..." â­ redis_solution
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### ì–¸ì–´ ë° í”„ë ˆì„ì›Œí¬
- **Python**: 3.11+
  - ì´ìœ : ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘, LLM API ì—°ë™ ìš©ì´

### í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **openai**: OpenAI API í´ë¼ì´ì–¸íŠ¸
- **dataclasses**: Node êµ¬ì¡° ì •ì˜
- **json**: ë°ì´í„° ì €ì¥/ë¡œë“œ
- **uuid**: ë…¸ë“œ ID ìƒì„±
- **datetime**: íƒ€ì„ìŠ¤íƒ¬í”„

### ì„ íƒ ë¼ì´ë¸ŒëŸ¬ë¦¬ (ê°œì„ ìš©)
- **rich**: í„°ë¯¸ë„ UI ê°œì„  (ìƒ‰ìƒ, í…Œì´ë¸”)
- **click**: CLI ëª…ë ¹ì–´ íŒŒì‹±
- **python-dotenv**: í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

### LLM
- **OpenAI GPT-4**
  - API í‚¤: í™˜ê²½ ë³€ìˆ˜ (`OPENAI_API_KEY`)

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### íŒŒì¼ êµ¬ì¡°

```
myDream/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.py           # CLI ì§„ì…ì , ë©”ì¸ ë£¨í”„
â”‚   â”œâ”€â”€ models.py         # Node í´ë˜ìŠ¤ ì •ì˜
â”‚   â”œâ”€â”€ tree.py           # íŠ¸ë¦¬ ê´€ë¦¬ (CRUD)
â”‚   â”œâ”€â”€ commands.py       # ëª…ë ¹ì–´ ì²˜ë¦¬ (/save, /goto ë“±)
â”‚   â”œâ”€â”€ llm.py            # LLM API ì—°ë™
â”‚   â””â”€â”€ storage.py        # JSON ì €ì¥/ë¡œë“œ
â”œâ”€â”€ data/
â”‚   â””â”€â”€ tree.json         # íŠ¸ë¦¬ ë°ì´í„° (ìë™ ìƒì„±)
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_node.py
â”‚   â”œâ”€â”€ test_tree.py
â”‚   â”œâ”€â”€ test_commands.py
â”‚   â””â”€â”€ test_scenarios.py # ì‹œë‚˜ë¦¬ì˜¤ E2E í…ŒìŠ¤íŠ¸
â”œâ”€â”€ .env                  # í™˜ê²½ ë³€ìˆ˜ (API í‚¤)
â”œâ”€â”€ requirements.txt      # ì˜ì¡´ì„±
â””â”€â”€ README.md
```

### ì£¼ìš” ëª¨ë“ˆ ì„¤ëª…

#### 1. `models.py` - ë°ì´í„° ëª¨ë¸
```python
from dataclasses import dataclass, field
from typing import Dict, Optional

@dataclass
class Node:
    id: str
    parent_id: Optional[str]
    user_question: str
    ai_answer: str
    created_at: str
    metadata: Dict = field(default_factory=dict)
```

#### 2. `tree.py` - íŠ¸ë¦¬ ê´€ë¦¬
```python
# ì „ì—­ ìƒíƒœ
all_nodes: Dict[str, Node] = {}
checkpoints: Dict[str, str] = {}
current_node_id: Optional[str] = None

def create_node(parent_id, question, answer) -> Node:
    """ìƒˆ ë…¸ë“œ ìƒì„±"""

def get_context_path(node_id) -> List[Dict]:
    """ë…¸ë“œ â†’ ë£¨íŠ¸ ì—­ì¶”ì í•˜ì—¬ LLM ì»¨í…ìŠ¤íŠ¸ ìƒì„±"""

def get_children(node_id) -> List[Node]:
    """ìì‹ ë…¸ë“œ ì¡°íšŒ"""
```

#### 3. `commands.py` - ëª…ë ¹ì–´ ì²˜ë¦¬
```python
def save_command(checkpoint_name: str):
    """/save <name> êµ¬í˜„"""

def goto_command(target: str):
    """/goto <node_id | checkpoint> êµ¬í˜„"""

def history_command():
    """/history êµ¬í˜„"""

def tree_command():
    """/tree êµ¬í˜„"""

def list_command():
    """/list êµ¬í˜„"""
```

#### 4. `llm.py` - LLM ì—°ë™
```python
def call_llm_api(context: List[Dict], user_input: str) -> str:
    """OpenAI API í˜¸ì¶œ"""

def build_context(node_id: Optional[str]) -> List[Dict]:
    """í˜„ì¬ ê²½ë¡œì˜ ì»¨í…ìŠ¤íŠ¸ ìƒì„±"""
```

#### 5. `storage.py` - ë°ì´í„° ì˜ì†ì„±
```python
def save_to_file(filename: str = "data/tree.json"):
    """íŠ¸ë¦¬ ë°ì´í„° ì €ì¥"""

def load_from_file(filename: str = "data/tree.json"):
    """íŠ¸ë¦¬ ë°ì´í„° ë¡œë“œ"""
```

#### 6. `main.py` - ë©”ì¸ ë£¨í”„
```python
def main():
    """CLI ë©”ì¸ ë£¨í”„"""
    # 1. ì´ˆê¸°í™” (ë°ì´í„° ë¡œë“œ)
    # 2. ëª…ë ¹ì–´ ë£¨í”„
    # 3. ì¢…ë£Œ ì‹œ ì €ì¥
```

---

## êµ¬í˜„ ì¼ì •

### ì´ ì†Œìš” ê¸°ê°„: **3-4ì¼**

### Day 1: í•µì‹¬ êµ¬ì¡° êµ¬í˜„ (8ì‹œê°„)
**ëª©í‘œ**: ê¸°ë³¸ ë…¸ë“œ ìƒì„± ë° ëŒ€í™” íë¦„

- [x] í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
  - ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
  - `requirements.txt` ì‘ì„±
  - í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

- [x] `models.py` êµ¬í˜„
  - Node í´ë˜ìŠ¤ ì •ì˜
  - ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì„±

- [x] `tree.py` êµ¬í˜„
  - `create_node()` êµ¬í˜„
  - `get_context_path()` êµ¬í˜„
  - `all_nodes`, `current_node_id` ì „ì—­ ìƒíƒœ ê´€ë¦¬
  - ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì„±

- [x] ê¸°ë³¸ ëŒ€í™” íë¦„ (ì‹œë‚˜ë¦¬ì˜¤ 1)
  - ì‚¬ìš©ì ì…ë ¥ â†’ ë…¸ë“œ ìë™ ìƒì„±
  - ê°„ë‹¨í•œ ë”ë¯¸ LLM (ì‹¤ì œ API ì—°ë™ ì „)

**ê²€ì¦**:
```bash
python src/main.py
> ì§ˆë¬¸1
[AI] ì‘ë‹µ1 (ë”ë¯¸)
> ì§ˆë¬¸2
[AI] ì‘ë‹µ2 (ë”ë¯¸)
```

---

### Day 2: ëª…ë ¹ì–´ ì‹œìŠ¤í…œ êµ¬í˜„ (8ì‹œê°„)
**ëª©í‘œ**: ëª¨ë“  CLI ëª…ë ¹ì–´ ì™„ì„±

- [x] `commands.py` êµ¬í˜„
  - `/save` (ì‹œë‚˜ë¦¬ì˜¤ 4)
  - `/goto` (ì‹œë‚˜ë¦¬ì˜¤ 2, 5)
  - `/history` (ì‹œë‚˜ë¦¬ì˜¤ 6)
  - `/tree` (ì‹œë‚˜ë¦¬ì˜¤ 7)
  - `/list`
  - `/help`
  - `/exit`

- [x] ëª…ë ¹ì–´ íŒŒì‹± ë¡œì§
  - ì‚¬ìš©ì ì…ë ¥ì´ `/`ë¡œ ì‹œì‘í•˜ë©´ ëª…ë ¹ì–´ ì²˜ë¦¬
  - ì•„ë‹ˆë©´ ì¼ë°˜ ëŒ€í™”ë¡œ ì²˜ë¦¬

- [x] ìœ ë‹› í…ŒìŠ¤íŠ¸
  - ê° ëª…ë ¹ì–´ë³„ í…ŒìŠ¤íŠ¸
  - ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸

**ê²€ì¦**:
```bash
> /save test
âœ… 'test' ì €ì¥ ì™„ë£Œ
> /goto root
âœ… rootë¡œ ì´ë™
> /tree
ğŸŒ³ íŠ¸ë¦¬ êµ¬ì¡° ì¶œë ¥
```

---

### Day 3: LLM ì—°ë™ ë° ë°ì´í„° ì €ì¥ (8ì‹œê°„)
**ëª©í‘œ**: ì‹¤ì œ OpenAI API ì—°ë™ ë° ì˜ì†ì„±

- [x] `llm.py` êµ¬í˜„
  - OpenAI API í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
  - `call_llm_api()` êµ¬í˜„
  - `build_context()` êµ¬í˜„
  - ì—ëŸ¬ ì²˜ë¦¬ (API ì‹¤íŒ¨, í† í° ì´ˆê³¼ ë“±)

- [x] `storage.py` êµ¬í˜„ (ì‹œë‚˜ë¦¬ì˜¤ 8)
  - `save_to_file()` JSON ì €ì¥
  - `load_from_file()` JSON ë¡œë“œ
  - `/exit` ì‹œ ìë™ ì €ì¥
  - ì‹œì‘ ì‹œ ìë™ ë¡œë“œ

- [x] í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
  - `.env` íŒŒì¼ ìƒì„±
  - `OPENAI_API_KEY` ì„¤ì •

**ê²€ì¦**:
```bash
> Django ì„±ëŠ¥ ë¬¸ì œê°€ ìˆì–´ìš”
[AI] (ì‹¤ì œ GPT-4 ì‘ë‹µ)
> /exit
âœ… íŠ¸ë¦¬ ì €ì¥ ì™„ë£Œ

# ì¬ì‹œì‘
> /tree
(ì´ì „ íŠ¸ë¦¬ ë³µêµ¬ë¨)
```

---

### Day 4: í†µí•© í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì • (8ì‹œê°„)
**ëª©í‘œ**: ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦ ë° ì•ˆì •í™”

- [x] E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
  - ì‹œë‚˜ë¦¬ì˜¤ 1-8 ì „ì²´ í…ŒìŠ¤íŠ¸
  - `tests/test_scenarios.py`

- [x] ë²„ê·¸ ìˆ˜ì •
  - ë°œê²¬ëœ ë²„ê·¸ ìˆ˜ì •
  - ì—£ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬

- [x] ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
  - ëª…ë ¹ì–´ ì˜¤ë¥˜ ë©”ì‹œì§€ ê°œì„ 
  - ë„ì›€ë§ ë³´ê°•
  - ASCII íŠ¸ë¦¬ ë Œë”ë§ ê°œì„ 

- [x] README ì‘ì„±
  - ì„¤ì¹˜ ë°©ë²•
  - ì‚¬ìš©ë²•
  - ëª…ë ¹ì–´ ë ˆí¼ëŸ°ìŠ¤

**ê²€ì¦**:
- ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ 1-8 ìˆ˜ë™ í…ŒìŠ¤íŠ¸
- ëª¨ë“  ìœ ë‹› í…ŒìŠ¤íŠ¸ í†µê³¼
- E2E í…ŒìŠ¤íŠ¸ í†µê³¼

---

## í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸

### 1. ë…¸ë“œ ìë™ ìƒì„±

#### ë™ì‘ ë°©ì‹
```python
def handle_conversation(user_input: str):
    # 1. ì»¨í…ìŠ¤íŠ¸ ì¡°íšŒ
    context = get_context_path(current_node_id)

    # 2. LLM í˜¸ì¶œ
    ai_response = call_llm_api(context, user_input)

    # 3. ë…¸ë“œ ìƒì„±
    new_node = create_node(
        parent_id=current_node_id,
        question=user_input,
        answer=ai_response
    )

    # 4. ìƒíƒœ ì—…ë°ì´íŠ¸
    all_nodes[new_node.id] = new_node
    current_node_id = new_node.id

    return ai_response
```

#### ì˜ˆì™¸ ì²˜ë¦¬
- LLM API ì‹¤íŒ¨ â†’ ì¬ì‹œë„ 3íšŒ, ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€
- í† í° ì´ˆê³¼ â†’ ì»¨í…ìŠ¤íŠ¸ ì¶•ì•½ (ìµœê·¼ Nê°œë§Œ)

---

### 2. `/save <name>` - ì²´í¬í¬ì¸íŠ¸ ì €ì¥

#### ë™ì‘ ë°©ì‹
```python
def save_command(checkpoint_name: str):
    if current_node_id is None:
        print("âŒ ì €ì¥í•  ë…¸ë“œê°€ ì—†ìŠµë‹ˆë‹¤")
        return

    checkpoints[checkpoint_name] = current_node_id
    print(f"âœ… '{checkpoint_name}' ì €ì¥ ì™„ë£Œ")
```

#### ê²€ì¦
- ì²´í¬í¬ì¸íŠ¸ ì´ë¦„ ì¤‘ë³µ í—ˆìš© (ë®ì–´ì“°ê¸°)
- ê³µë°± í¬í•¨ ì´ë¦„ í—ˆìš©

---

### 3. `/goto <target>` - ë…¸ë“œ ì´ë™

#### ë™ì‘ ë°©ì‹
```python
def goto_command(target: str):
    # 1. ì²´í¬í¬ì¸íŠ¸ ì´ë¦„ì¸ì§€ í™•ì¸
    if target in checkpoints:
        target_id = checkpoints[target]
    else:
        target_id = target

    # 2. ë…¸ë“œ ì¡´ì¬ í™•ì¸
    if target_id not in all_nodes:
        print(f"âŒ '{target}'ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
        return

    # 3. ì´ë™
    global current_node_id
    current_node_id = target_id
    print(f"âœ… {target}ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤")
```

#### ì˜ˆì™¸ ì²˜ë¦¬
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë…¸ë“œ â†’ ì—ëŸ¬ ë©”ì‹œì§€
- ë£¨íŠ¸ë¡œ ì´ë™ â†’ `/goto root` íŠ¹ìˆ˜ ì²˜ë¦¬

---

### 4. `/history` - ëŒ€í™” íˆìŠ¤í† ë¦¬

#### ë™ì‘ ë°©ì‹
```python
def history_command():
    if current_node_id is None:
        print("ì•„ì§ ëŒ€í™”ê°€ ì—†ìŠµë‹ˆë‹¤")
        return

    path = get_context_path(current_node_id)

    print("â”" * 40)
    print("í˜„ì¬ ê²½ë¡œ ëŒ€í™” íˆìŠ¤í† ë¦¬")
    print("â”" * 40)

    for msg in path:
        role = "ì‚¬ìš©ì" if msg["role"] == "user" else "AI"
        print(f"[{role}] {msg['content']}\n")

    print("â”" * 40)
```

---

### 5. `/tree` - íŠ¸ë¦¬ ì‹œê°í™”

#### ë™ì‘ ë°©ì‹
```python
def tree_command():
    print("ğŸŒ³ ëŒ€í™” íŠ¸ë¦¬ êµ¬ì¡°")
    print("â”" * 40)

    # ë£¨íŠ¸ ë…¸ë“œ ì°¾ê¸°
    root_nodes = [n for n in all_nodes.values() if n.parent_id is None]

    for root in root_nodes:
        print_tree_node(root, indent=0)

    print("â”" * 40)

def print_tree_node(node: Node, indent: int):
    # ë“¤ì—¬ì“°ê¸°
    prefix = "  " * indent + ("â””â”€ " if indent > 0 else "")

    # ì§ˆë¬¸ ìš”ì•½ (30ì)
    label = node.user_question[:30] + "..." if len(node.user_question) > 30 else node.user_question

    # ì²´í¬í¬ì¸íŠ¸ í‘œì‹œ
    checkpoint_label = ""
    for name, nid in checkpoints.items():
        if nid == node.id:
            checkpoint_label = f" â­ {name}"

    print(f"{prefix}{node.id[:8]}: {label}{checkpoint_label}")

    # ì¬ê·€ì ìœ¼ë¡œ ìì‹ ë…¸ë“œ ì¶œë ¥
    children = [n for n in all_nodes.values() if n.parent_id == node.id]
    for child in children:
        print_tree_node(child, indent + 1)
```

---

### 6. JSON ì €ì¥/ë¡œë“œ

#### ì €ì¥ ë°©ì‹
```python
def save_to_file(filename: str = "data/tree.json"):
    data = {
        "nodes": {
            nid: {
                "id": node.id,
                "parent_id": node.parent_id,
                "user_question": node.user_question,
                "ai_answer": node.ai_answer,
                "created_at": node.created_at,
                "metadata": node.metadata
            }
            for nid, node in all_nodes.items()
        },
        "checkpoints": checkpoints,
        "current_node_id": current_node_id
    }

    os.makedirs(os.path.dirname(filename), exist_ok=True)
    with open(filename, "w", encoding="utf-8") as f:
        json.dump(data, f, indent=2, ensure_ascii=False)

    print(f"âœ… íŠ¸ë¦¬ ì €ì¥ ì™„ë£Œ (ë…¸ë“œ {len(all_nodes)}ê°œ)")
```

#### ë¡œë“œ ë°©ì‹
```python
def load_from_file(filename: str = "data/tree.json"):
    global all_nodes, checkpoints, current_node_id

    if not os.path.exists(filename):
        print("ìƒˆ íŠ¸ë¦¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤")
        return

    with open(filename, "r", encoding="utf-8") as f:
        data = json.load(f)

    # ë…¸ë“œ ë³µêµ¬
    all_nodes = {
        nid: Node(**node_data)
        for nid, node_data in data["nodes"].items()
    }

    checkpoints = data["checkpoints"]
    current_node_id = data.get("current_node_id")

    print(f"âœ… íŠ¸ë¦¬ ë³µêµ¬ ì™„ë£Œ (ë…¸ë“œ {len(all_nodes)}ê°œ)")
```

---

## ì„±ê³µ ê¸°ì¤€

### ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­

| ìš”êµ¬ì‚¬í•­ | ê²€ì¦ ë°©ë²• | ìƒíƒœ |
|---------|----------|------|
| 1í„´ = 1ë…¸ë“œ ìë™ ìƒì„± | ëŒ€í™” í›„ `len(all_nodes)` ì¦ê°€ í™•ì¸ | â³ |
| ë¶„ê¸° ìë™ ë³´ì¡´ | `/goto` í›„ ìƒˆ ëŒ€í™” ì‹œ íŠ¸ë¦¬ ë¶„ê¸° í™•ì¸ | â³ |
| ì²´í¬í¬ì¸íŠ¸ ì €ì¥/ë³µêµ¬ | `/save`, `/goto checkpoint` ë™ì‘ | â³ |
| íŠ¸ë¦¬ ì‹œê°í™” | `/tree` ëª…ë ¹ ì‹¤í–‰ ì‹œ ASCII íŠ¸ë¦¬ ì¶œë ¥ | â³ |
| ë°ì´í„° ì˜ì†ì„± | ì¬ì‹œì‘ í›„ `/tree`ë¡œ ë³µêµ¬ í™•ì¸ | â³ |
| LLM ì—°ë™ | ì‹¤ì œ GPT-4 ì‘ë‹µ í™•ì¸ | â³ |

### ë¹„ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­

| ìš”êµ¬ì‚¬í•­ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|---------|------|----------|
| ì‘ë‹µ ì‹œê°„ | < 3ì´ˆ | LLM API í˜¸ì¶œ ~ ì‘ë‹µ í‘œì‹œ |
| ë°ì´í„° ë¬´ê²°ì„± | 100% | ë…¸ë“œ ì†ì‹¤ ì—†ìŒ í™•ì¸ |
| ëª…ë ¹ì–´ ì •í™•ë„ | 100% | ëª¨ë“  ëª…ë ¹ì–´ ì •ìƒ ë™ì‘ |
| ì—ëŸ¬ ë³µêµ¬ | API ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ | ì¬ì‹œë„ ë¡œì§ ê²€ì¦ |

### ì‚¬ìš©ì ê²½í—˜

- ëª…ë ¹ì–´ ë„ì›€ë§ ì œê³µ (`/help`)
- ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€
- ì§„í–‰ ìƒí™© í‘œì‹œ (ë…¸ë“œ ìƒì„±, ì €ì¥ ë“±)
- ì§ê´€ì ì¸ íŠ¸ë¦¬ ì‹œê°í™”

---

## ë¦¬ìŠ¤í¬ ê´€ë¦¬

### ê¸°ìˆ ì  ë¦¬ìŠ¤í¬

#### 1. LLM API ë¹„ìš©
- **ë¦¬ìŠ¤í¬**: OpenAI API í˜¸ì¶œ ë¹„ìš© ì¦ê°€
- **ì™„í™” ë°©ì•ˆ**:
  - ê°œë°œ ì¤‘ GPT-3.5 ì‚¬ìš©
  - ì»¨í…ìŠ¤íŠ¸ ê¸¸ì´ ì œí•œ (ìµœê·¼ Nê°œ í„´ë§Œ)
  - API í˜¸ì¶œ ë¡œê¹…

#### 2. í† í° ì œí•œ
- **ë¦¬ìŠ¤í¬**: ê¸´ ëŒ€í™” ì‹œ í† í° ì´ˆê³¼
- **ì™„í™” ë°©ì•ˆ**:
  - ì»¨í…ìŠ¤íŠ¸ ì¶•ì•½ ë¡œì§ (ìµœê·¼ 10í„´)
  - ì¤‘ìš” ë…¸ë“œë§Œ í¬í•¨ (ë©”íƒ€ë°ì´í„° í™œìš©)

#### 3. JSON íŒŒì¼ ì¶©ëŒ
- **ë¦¬ìŠ¤í¬**: ë™ì‹œ ì‹¤í–‰ ì‹œ ë°ì´í„° ì†ì‹¤
- **ì™„í™” ë°©ì•ˆ**:
  - Phase CLI-1ì€ ë‹¨ì¼ ì‚¬ìš©ìë§Œ ì§€ì›
  - í–¥í›„ ë°ì´í„°ë² ì´ìŠ¤ ì „í™˜

### ì¼ì • ë¦¬ìŠ¤í¬

#### 1. API ì—°ë™ ì§€ì—°
- **ë¦¬ìŠ¤í¬**: OpenAI API ì—°ë™ ë¬¸ì œ
- **ì™„í™” ë°©ì•ˆ**:
  - Day 1-2ì— ë”ë¯¸ LLM ì‚¬ìš©
  - Day 3ì— ì‹¤ì œ API ì—°ë™
  - ëŒ€ì²´ API ì¤€ë¹„ (Anthropic Claude)

#### 2. ë””ë²„ê¹… ì‹œê°„ ì´ˆê³¼
- **ë¦¬ìŠ¤í¬**: Day 4ì— ì˜ˆìƒì¹˜ ëª»í•œ ë²„ê·¸
- **ì™„í™” ë°©ì•ˆ**:
  - Day 1-3ì— ì¶©ë¶„í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸
  - ë§¤ì¼ í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  - ë²„í¼ 1ì¼ í™•ë³´

---

## ë‹¤ìŒ ë‹¨ê³„ (Phase CLI-2 ì´í›„)

### Phase CLI-2: ê³ ê¸‰ ê¸°ëŠ¥
- `/reparent` - ì¤‘ê°„ ì‚½ì…
- ë…¸ë“œ ë©”íƒ€ë°ì´í„° í™œìš©
- íŠ¸ë¦¬ ê²€ìƒ‰ ê¸°ëŠ¥
- ë…¸ë“œ ì‚­ì œ ê¸°ëŠ¥

### Phase WEB-1: ì›¹ UI ì „í™˜
- React ê¸°ë°˜ íŠ¸ë¦¬ ì‹œê°í™”
- ë“œë˜ê·¸ ì•¤ ë“œë¡­
- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

### Phase CLI-3: AI ê³ ê¸‰ ê¸°ëŠ¥
- LCA ê¸°ë°˜ ë³‘í•© (`/merge`)
- AI ìë™ ë¶„ì„ (ì¤‘ìš”ë„, ê·¸ë£¹í•‘)
- ëŒ€í™” ìš”ì•½
- ì„ë² ë”© ê¸°ë°˜ ê²€ìƒ‰

---

## ë¶€ë¡

### A. ëª…ë ¹ì–´ ë ˆí¼ëŸ°ìŠ¤

| ëª…ë ¹ì–´ | ë¬¸ë²• | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `/save` | `/save <name>` | í˜„ì¬ ë…¸ë“œë¥¼ ì²´í¬í¬ì¸íŠ¸ë¡œ ì €ì¥ | `/save weather_talk` |
| `/goto` | `/goto <node_id \| checkpoint>` | íŠ¹ì • ë…¸ë“œë¡œ ì´ë™ | `/goto node_abc` |
| `/history` | `/history` | í˜„ì¬ ê²½ë¡œ ëŒ€í™” íˆìŠ¤í† ë¦¬ | `/history` |
| `/tree` | `/tree` | ì „ì²´ íŠ¸ë¦¬ êµ¬ì¡° ì¶œë ¥ | `/tree` |
| `/list` | `/list` | ëª¨ë“  ë…¸ë“œ ëª©ë¡ | `/list` |
| `/help` | `/help` | ë„ì›€ë§ | `/help` |
| `/exit` | `/exit` | ì €ì¥ í›„ ì¢…ë£Œ | `/exit` |

### B. í™˜ê²½ ë³€ìˆ˜

```bash
# .env íŒŒì¼
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4
MAX_TOKENS=2000
CONTEXT_LIMIT=10  # ìµœê·¼ Ní„´ë§Œ ì»¨í…ìŠ¤íŠ¸ì— í¬í•¨
```

### C. ì˜ì¡´ì„±

```txt
# requirements.txt
openai>=1.0.0
python-dotenv>=1.0.0
rich>=13.0.0  # (ì„ íƒ) í„°ë¯¸ë„ UI ê°œì„ 
```

---

## ë¬¸ì„œ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| 1.0 | 2025-11-09 | ê¸°ìˆ  ì´ê´„ì | ì´ˆì•ˆ ì‘ì„± |

---

**ë¬¸ì„œ ì¢…ë£Œ**

ì´ ê³„íšì„œì— ëŒ€í•œ í”¼ë“œë°±ì´ë‚˜ ì§ˆë¬¸ì€ íŒ€ íšŒì˜ì—ì„œ ê³µìœ í•´ì£¼ì„¸ìš”.
