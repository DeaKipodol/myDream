# 요구사항 정리
- 작성일: 2025-11-05
- 설계자: 아키텍처 설계자
- 상태: 분석중

## 1. 초기 요구사항

### 1.1 핵심 기능
AI 기반 고민상담 시스템에서 대화 도중 다른 해결 경로로 전환하고, 특정 시점으로 복귀하며, 잘못된 논리를 신속히 교체할 수 있는 인터랙티브 상담 환경을 제공합니다.

**핵심 메커니즘:**
- 트리 구조 기반 대화 관리 (각 메시지는 노드, 단일 부모 구조)
- 노드 클릭을 통한 경로 전환 (파일 시스템의 디렉토리 탐색과 유사)
- LCA(최저 공통 조상) 알고리즘 기반 경로 재구성
- 체크포인트/스냅샷을 통한 시점 복원
- 비활성 경로의 보존 영역 관리

### 1.2 기술 스택 요구사항
- **프론트엔드**: HTML/CSS/JavaScript
- **백엔드**: Python (FastAPI)
- **데이터베이스**: NoSQL (MongoDB 권장)
- **AI 통합**: 프로바이더 추상화 레이어
- **배포**: Docker, CI/CD

### 1.3 주요 시나리오
1. 경로 전환: A→B→D에서 C 클릭 → A→C로 전환
2. 분기 이동: A→B→D에서 F 클릭 → A→B→F로 전환
3. 체크포인트 복원: 잘못된 논리 누적 시 이전 시점 복원
4. 보존 영역 관리: 비활성 경로 열람 및 재활성화

## 2. 확정된 요구사항

### 2.1 기능 요구사항 (MVP)
- 대화 트리 생성/조회
- 노드 클릭 기반 경로 전환
- 체크포인트 생성/복원
- AI 응답 생성
- UI: TreeView, ChatView, Breadcrumbs, CheckpointList

### 2.2 비기능 요구사항
- 성능: 경로 전환 p95 200ms
- 동시 사용자: 1,000명
- 가용성: 99.9%
- 보안: JWT, RBAC
- 접근성: WCAG AA

## 3. 가정
- 평균 경로 길이: 12 노드
- 평균 트리 깊이: 12, 최대 50
- 분기 수: 노드당 평균 1.5개 자식
- 초기 사용자: 100명 → 3개월 내 1,000명

## 4. 충분도 판단
- [x] 핵심 아키텍처 요구사항 명확
- [x] 기술 스택 확정
- [x] MVP 범위 명확
- [x] 설계 시작 가능: **예**

## 5. 다음 단계
1. 아키텍처 설계서 작성
2. 파일구조 설계서 작성
3. 개발자 지시서 작성
